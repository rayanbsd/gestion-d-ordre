<p-dataTable (change)="calculate()" (onRowSelect)="onRowSelect($event)" [immutable]=false class="ui-datatable table" [value]="portfolioafter" [rows]="10" [pageLinks]="3" [rowsPerPageOptions]="[5,10,20]" resizableColumns="true" reorderableColumns="true"
    [editable]="true" scrollable="true" reorderableColumns="true"  [(selection)]="tmpPortfolioafter" >
    <p-column [style]="{'width':'38px'}" selectionMode="multiple"></p-column>
    <p-column [style]="{'width':'250px'}" field="avaiable_quantity_without_blocked" header="avaiable_quantity_without_blocked" [sortable]="true" filterPlaceholder="Search"></p-column>
    <p-column [style]="{'width':'150px'}" field="blocked_quantity" header="blocked_quantity" [sortable]="true" filterPlaceholder="Search"></p-column>
    <p-column [style]="{'width':'100px'}" field="currency" header="currency" [sortable]="true" filterPlaceholder="Search" [editable]="true"></p-column>
    <p-column [style]="{'width':'150px'}" field="pourcentage_brokerage" header="%brokerage" [sortable]="true" filterPlaceholder="Search" [editable]="true"></p-column>
    <p-column [style]="{'width':'100px'}" field="brokerage" header="brokerage" [sortable]="true" filterPlaceholder="Search" [editable]="true"></p-column>
    <p-column [style]="{'width':'150px'}" field="held_quantity" header="held_quantity" [sortable]="true" filterPlaceholder="Search">
    </p-column>
    <p-column [style]="{'width':'100px'}" field="quantity" header="quantity" [sortable]="true" filterPlaceholder="Search" [editable]="true">
        <ng-template pTemplate="body" let-col let-inv="rowData">
            <div>{{inv.quantity}}</div>
        </ng-template>
    </p-column>
    <p-column [style]="{'width':'150px'}" field="portfolio_number" header="portfolio_number" [sortable]="true" filterPlaceholder="Search" [editable]="true"></p-column>
    <p-column [style]="{'width':'150px'}" field="portfolio_label" header="portfolio_label" [sortable]="true" filterPlaceholder="Search"></p-column>
    <p-column [style]="{'width':'150px'}" field="clean_value" header="clean_value" [sortable]="true" filterPlaceholder="Search" [editable]="true"></p-column>
    <p-column [style]="{'width':'150px'}" field="mirror_account" header="mirror_account" [sortable]="true" filterPlaceholder="Search" [editable]="true"></p-column>
    <p-column [style]="{'width':'150px'}" field="bank_account" header="bank_account" [sortable]="true" filterPlaceholder="Search" [editable]="true"></p-column>
    <p-footer>
        <div class="ui-helper-clearfix" style="width:100%">
            <i style="float:right" class="fa fa-plus" (click)="showdialog()"></i>
            <i style="float:right" class="fa fa-trash" (click)="delete()"></i>
        </div>
    </p-footer>
</p-dataTable>

<p-dialog styleClass="customDialog" header="Portfeuilles ()" [(visible)]="dialog" [responsive]="true" showEffect="fade" [modal]="true" modal="true" resizable="true" appendToBody="true" widgetVar="ex" styleClass="customDialog">
    <p-dataTable *ngIf="table" class="ui-datatable table" [value]="portfolio" [rows]="10" [pageLinks]="3" [stacked]="stacked" [rowsPerPageOptions]="[5,10,20]" resizableColumns="true" columnResizeMode="expand" reorderableColumns="true" selectionMode="single"
        [(selection)]="tmpPortfolio">
        <p-column field="account_class" header="account_class" [sortable]="true" [filter]="true" filterPlaceholder="Search"></p-column>
        <p-column field="entity" header="entity" [sortable]="true" [filter]="true" filterPlaceholder="Search"></p-column>
        <p-column field="account_number" header="account_number" [sortable]="true" [filter]="true" filterPlaceholder="Search"></p-column>
        <p-column field="account_label" header="account_label" [sortable]="true" [filter]="true" filterPlaceholder="Search"></p-column>
    </p-dataTable>
    <div *ngIf="advanced">
        <table class="table2">
            <tr>
                <td><label>account_class</label></td>
                <td><input class="inline" type="text" [(ngModel)]="portfolioSearch.account_class"></td>
            </tr><br>
            <tr>
                <td><label>entity</label></td>
                <td><input class="inline" type="text" [(ngModel)]="portfolioSearch.entity"></td>
            </tr><br>
            <tr>
                <td><label>account_number</label></td>
                <td><input class="inline" type="text" [(ngModel)]="portfolioSearch.account_number"></td>
            </tr><br>
            <tr>
                <td><label>account_label</label></td>
                <td><input class="iinline" type="text" [(ngModel)]="portfolioSearch.account_label"></td>
            </tr>
        </table>
    </div>
    <p-footer>
        <br>
        <div class="line">
            <div *ngIf="table" class="search " (click)="advancedsearch()">Recherche avanc√©e</div>
            <div *ngIf="advanced" class="search " (click)="tableshow()">Resultats</div>
            <div class="choice"><i class="fa fa-check" (click)="validatedialog()"></i> &nbsp;
                <i class="fa fa-times" (click)="hidedialog()"></i> </div>
        </div>
    </p-footer>
</p-dialog>